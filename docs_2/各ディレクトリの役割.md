# 📁 プロジェクトディレクトリ役割解説

## 🏗️ ルートレベル

### 📋 プロジェクト設定ファイル
```
project.godot           # Godotプロジェクト設定（エンジン設定、入力マップ）
export_presets.cfg      # ビルド・エクスポート設定（Windows/Linux/Mac等）
override.cfg           # ローカル開発者固有設定（gitignore対象）
.gitignore             # Git除外ファイル設定
README.md              # プロジェクト概要・使用方法
```

**役割**: プロジェクト全体の設定と外部向け情報

---

## 🤖 autoload/ - シングルトンスクリプト

**役割**: ゲーム全体で共有される管理クラス群

```
Game.gd                # ゲーム全体の状態管理
├── 現在のユーザー情報
├── シーン遷移管理  
├── グローバル変数
└── プレイヤーデータ管理

Net.gd                 # ネットワーク通信統括
├── GraphQLクライアント
├── WebSocket接続管理
├── 認証処理
└── 通信エラーハンドリング

Audio.gd               # 音声システム
├── BGM再生・制御
├── SE（効果音）管理
├── 音量設定
└── 音声リソース管理

Chat.gd                # チャット機能
├── メッセージ送受信
├── チャット履歴管理
├── ルーム別チャット
└── メッセージフィルタリング

Rooms.gd               # ルーム管理
├── ルーム作成・削除
├── 入退室処理
├── メンバー管理
└── 招待システム

Settings.gd            # 設定管理
├── ユーザー設定保存/読込
├── 音量・画質設定
├── キー設定
└── 設定ファイルI/O
```

**使用頻度**: 常時アクティブ（ゲーム起動中ずっと）
**アクセス方法**: `Game.current_user`, `Net.send_message()`など

---

## 🎨 assets/ - 静的リソース

### 👤 assets/characters/ - キャラクター関連
```
models/                # 3Dキャラクターモデル
├── character_01.glb   # アリスのモデル
├── character_02.glb   # ボブのモデル
├── character_03.glb   # キャロルのモデル
└── character_04.glb   # デイブのモデル

textures/              # キャラクターテクスチャ
├── character_01_diffuse.png   # アリスの基本テクスチャ
├── character_01_normal.png    # アリスの法線マップ
└── [その他キャラクターテクスチャ]

animations/            # 共通アニメーションファイル
└── character_animations.tres  # idle, walk, run等のアニメーション
```

**役割**: プレイヤーキャラクターの見た目とアニメーション
**使用タイミング**: キャラクター選択時、ゲーム中の表示

### 🌍 assets/environments/ - 環境・マップ関連
```
models/                # 環境3Dモデル
├── town_buildings.glb # タウンの建物群
├── forest_props.glb   # 森のオブジェクト（木、岩等）
└── beach_environment.glb # 海辺の環境

textures/              # 環境テクスチャ
├── grass_diffuse.png  # 草地テクスチャ
├── stone_normal.png   # 石の法線マップ
└── water_texture.png  # 水面テクスチャ

materials/             # 環境マテリアル設定
├── grass_material.tres    # 草地マテリアル（シェーダー設定）
├── water_material.tres    # 水面マテリアル（反射・透明度等）
└── building_material.tres # 建物マテリアル
```

**役割**: ゲーム世界の背景・環境オブジェクト
**使用タイミング**: 各マップ読み込み時

### 🖼️ assets/ui/ - ユーザーインターフェース
```
icons/                 # UIアイコン類
├── character_icons/   # キャラ選択画面用アイコン
├── ui_icons/         # ボタン、メニュー用アイコン
└── room_icons/       # ルーム種別アイコン

themes/               # UIテーマファイル
├── main_ui_theme.tres    # メインUIのスタイル設定
└── chat_theme.tres       # チャットUI専用スタイル

fonts/                # フォントファイル
├── ui_font_regular.ttf   # 通常テキスト用
└── ui_font_bold.ttf      # 見出し・強調用
```

**役割**: UI要素の見た目とスタイル定義
**使用タイミング**: UI表示時

### 🔊 assets/audio/ - 音声ファイル
```
bgm/                  # 背景音楽
├── town_theme.ogg    # タウンのBGM
├── forest_theme.ogg  # 森エリアのBGM  
└── menu_theme.ogg    # メニュー画面のBGM

sfx/                  # 効果音
├── ui_sounds/        # UI操作音
├── footsteps/        # 足音バリエーション
└── ambient/          # 環境音（鳥のさえずり等）
```

**役割**: ゲーム内で使用する全ての音声
**使用タイミング**: `Audio.play_bgm()`, `Audio.play_sfx()`で呼び出し

---

## 🎬 scenes/ - シーンファイル

### 🚀 scenes/main/ - メインシーン
```
Main.tscn             # ゲーム起動時の最初のシーン
└── Main.gd           # 起動処理、初期化、シーン遷移制御
```

**役割**: アプリケーションのエントリーポイント
**内容**: スプラッシュ、ログイン画面への遷移、初期化処理

### 👤 scenes/player/ - プレイヤー関連
```
Player.tscn           # 自分のプレイヤーシーン
├── CharacterBody3D   # 物理ボディ
├── MeshInstance3D    # 3Dモデル表示
├── AnimationPlayer   # アニメーション制御
└── Camera3D          # プレイヤーカメラ

RemotePlayer.tscn     # 他プレイヤー表示用
├── CharacterBody3D   # 物理ボディ（同期用）
├── MeshInstance3D    # 3Dモデル表示
└── AnimationPlayer   # アニメーション再生

components/           # プレイヤー関連コンポーネント
├── NameTag.tscn      # 名前表示（3D空間）
└── PlayerAnimator.tscn # アニメーション制御専用
```

**役割**: プレイヤーキャラクターの表示と制御
**使用タイミング**: ゲーム中常時、他プレイヤー参加時

### 🌍 scenes/worlds/ - ワールド・マップ
```
MainTown.tscn         # メインタウンマップ
├── NavigationRegion3D # ナビゲーション設定
├── 建物・オブジェクト配置
└── SpawnPoint        # プレイヤー出現地点

ForestArea.tscn       # 森エリア
BeachArea.tscn        # 海辺エリア

private_rooms/        # プライベートルーム用
├── PrivateRoomBase.tscn  # ベースルームテンプレート
└── StandardRoom.tscn     # 標準的なプライベートルーム

components/           # マップ共通コンポーネント
├── MapPortal.tscn    # マップ間移動ポータル
├── SpawnPoint.tscn   # プレイヤー出現地点
└── InteractArea.tscn # インタラクション可能エリア
```

**役割**: ゲーム世界の各エリア定義
**使用タイミング**: マップ切り替え時

### 🖥️ scenes/ui/ - ユーザーインターフェース

#### screens/ - 全画面UI
```
LoginScreen.tscn      # ログイン画面
├── ユーザー名・パスワード入力
├── ログインボタン
└── エラー表示

CharacterSelect.tscn  # キャラクター選択画面  
├── キャラクター一覧
├── 3Dプレビュー表示
└── 決定・戻るボタン

SettingsScreen.tscn   # 設定画面
├── 音量スライダー
├── 画質設定
├── 操作設定
└── 適用・キャンセルボタン

LoadingScreen.tscn    # ローディング画面
├── プログレスバー
├── ローディングアニメーション
└── ステータステキスト
```

#### hud/ - ゲーム内HUD
```
MainHUD.tscn          # メインゲーム中のHUD
├── チャットボタン
├── 設定ボタン
├── ルーム情報
└── プレイヤー情報

ChatPanel.tscn        # チャットパネル
├── メッセージ表示エリア
├── メッセージ入力欄
├── 送信ボタン
└── チャット設定

RoomPanel.tscn        # ルーム管理パネル
├── 現在のルーム情報
├── メンバー一覧
├── 招待ボタン
└── 退室ボタン

TrainingMenu.tscn     # 研修メニュー
├── 研修一覧
├── 進捗表示
├── ブラウザ起動ボタン
└── 実績確認
```

#### dialogs/ - ダイアログ
```
ConfirmDialog.tscn    # 確認ダイアログ
CreateRoomDialog.tscn # ルーム作成ダイアログ
InviteDialog.tscn     # プレイヤー招待ダイアログ
ErrorDialog.tscn      # エラー表示ダイアログ
```

#### components/ - 再利用UIコンポーネント
```
UserCard.tscn         # ユーザー情報カード
├── アバター画像
├── ユーザー名
├── ステータス
└── アクションボタン

RoomListItem.tscn     # ルーム一覧の項目
├── ルーム名
├── 人数表示
├── ルーム種別アイコン
└── 参加ボタン

ChatMessage.tscn      # チャットメッセージ表示
├── ユーザー名
├── メッセージ本文
├── タイムスタンプ
└── メッセージ種別表示
```

**役割**: ユーザーとの全ての接点となるインターフェース
**使用タイミング**: 画面遷移、ユーザー操作時

### ✨ scenes/effects/ - エフェクト・パーティクル
```
PlayerSpawnEffect.tscn    # プレイヤー出現時エフェクト
ChatBubble.tscn           # チャット吹き出し
particles/
└── WarpEffect.tscn       # マップ移動時のワープエフェクト
```

**役割**: 視覚的な演出とフィードバック
**使用タイミング**: 特定のアクション・イベント発生時

---

## 💻 scripts/ - ロジックスクリプト

### ⚙️ scripts/core/ - コアシステム
```
Constants.gd          # 定数定義（URL、設定値等）
├── SERVER_URLS
├── ANIMATION_SPEEDS  
├── UI_CONSTANTS
└── NETWORK_SETTINGS

GameTypes.gd          # データ型定義
├── PlayerData class
├── RoomInfo class
├── ChatMessage class
└── TrainingData class

AnimationStates.gd    # アニメーション状態定義
├── State enum（IDLE, WALK, RUN等）
├── アニメーション名マッピング
└── 優先度設定

Utils.gd              # 汎用ユーティリティ関数
├── 文字列処理関数
├── 数学計算関数
├── 時間変換関数
└── バリデーション関数

SaveSystem.gd         # セーブ・ロードシステム
├── ユーザーデータ保存
├── 設定ファイル管理
├── 暗号化・復号化
└── バックアップ機能

EventBus.gd           # グローバルイベントバス
├── UI関連シグナル
├── ネットワーク関連シグナル
├── プレイヤー関連シグナル
└── システム関連シグナル
```

**役割**: ゲーム全体で使用される基盤機能
**使用頻度**: 他の全てのスクリプトから参照

### 🌐 scripts/network/ - ネットワーク関連
```
GraphQLClient.gd      # GraphQL通信クライアント
├── クエリ実行
├── ミューテーション実行
├── レスポンス解析
└── エラーハンドリング

WebSocketClient.gd    # WebSocket通信クライアント
├── 接続・切断管理
├── メッセージ送受信
├── 再接続処理
└── 接続状態監視

NetworkMessages.gd    # ネットワークメッセージ定義
├── プレイヤー位置同期メッセージ
├── チャットメッセージ
├── ルームイベントメッセージ
└── システムメッセージ

AuthManager.gd        # 認証管理
├── ログイン処理
├── JWTトークン管理
├── セッション維持
└── 自動再認証

SyncManager.gd        # 同期管理
├── プレイヤー位置同期
├── アニメーション同期
├── 差分送信制御
└── 補間処理
```

**役割**: サーバーとの全ての通信処理
**使用タイミング**: ネットワーク機能使用時

### 👤 scripts/player/ - プレイヤーロジック
```
PlayerController.gd   # プレイヤー制御
├── 移動処理（WASD入力）
├── カメラ制御
├── ジャンプ・重力
└── コリジョン処理

PlayerSync.gd         # プレイヤー同期
├── 位置情報送信
├── 他プレイヤー情報受信
├── 補間処理
└── 予測処理

AnimationController.gd # アニメーション制御
├── 移動アニメーション自動切替
├── アクションアニメーション再生
├── アニメーション優先度管理
└── ネットワーク同期

CharacterSelector.gd  # キャラクター選択
├── キャラクター一覧取得
├── モデル読み込み
├── プレビュー表示
└── 選択保存

InputHandler.gd       # 入力処理
├── キーボード入力
├── マウス入力  
├── アクション入力
└── 入力バインド管理
```

**役割**: プレイヤーキャラクターの全ての動作制御
**使用タイミング**: ゲーム中常時

### 🏠 scripts/rooms/ - ルーム関連
```
RoomManager.gd        # ルーム管理
├── ルーム作成・削除
├── 入退室処理
├── ルーム一覧管理
└── パーミッション制御

RoomData.gd           # ルームデータ管理
├── ルーム情報保持
├── メンバー情報管理
├── ルーム設定
└── データ永続化

MemberManager.gd      # メンバー管理
├── メンバー追加・削除
├── 権限変更
├── オンライン状態管理
└── メンバー一覧更新

InviteSystem.gd       # 招待システム
├── 招待送信・受信
├── 招待承認・拒否
├── プレイヤー検索
└── 招待履歴管理
```

**役割**: ルーム機能の全体制御
**使用タイミング**: ルーム関連操作時

### 💬 scripts/chat/ - チャット関連
```
ChatManager.gd        # チャット管理
├── メッセージ送受信
├── ルーム別チャット分離
├── メッセージ履歴管理
└── フィルタリング

MessageFormatter.gd   # メッセージ整形
├── テキスト整形
├── 絵文字変換
├── URL検出・リンク化
└── 禁止語句フィルター

ChatHistory.gd        # 履歴管理
├── メッセージ履歴保存
├── 履歴検索
├── 履歴削除・管理
└── キャッシュ管理

ChatUI.gd             # チャットUI制御
├── メッセージ表示
├── スクロール制御
├── 入力処理
└── 表示設定
```

**役割**: チャット機能の全体制御
**使用タイミング**: チャット使用時

### 🎓 scripts/training/ - 研修システム
```
TrainingManager.gd    # 研修管理
├── 研修データ取得
├── 進捗管理
├── ブラウザ連携
└── 実績記録

TrainingData.gd       # 研修データ管理
├── 研修一覧保持
├── カテゴリ分類
├── 進捗状況
└── スコア管理

ProgressTracker.gd    # 進捗追跡
├── 学習進捗記録
├── 完了状態管理
├── 統計情報計算
└── レポート生成

BrowserLauncher.gd    # ブラウザ起動
├── 外部URL起動
├── ブラウザ選択
├── セキュリティ処理
└── 戻り処理
```

**役割**: 研修システムとの連携
**使用タイミング**: 研修機能使用時

### 🖱️ scripts/ui/ - UI制御スクリプト
```
UIController.gd       # UI全体制御
├── UI要素管理
├── イベント処理
├── 状態管理
└── アニメーション制御

ScreenManager.gd      # 画面遷移管理
├── シーン切り替え
├── 遷移アニメーション
├── 履歴管理
└── 戻る処理

DialogManager.gd      # ダイアログ管理
├── ダイアログ表示・非表示
├── モーダル管理
├── 優先度制御
└── 結果処理

NotificationManager.gd # 通知管理
├── 通知表示
├── 通知履歴
├── 通知設定
└── 自動消去

components/           # UIコンポーネント制御
├── UIAnimator.gd     # UIアニメーション
├── ListController.gd # リスト制御
└── FormValidator.gd  # フォーム検証
```

**役割**: UI関連の全ての制御
**使用タイミング**: UI操作時

---

## 📊 data/ - データファイル

### ⚙️ data/config/ - 設定ファイル
```
server_config.json    # サーバー接続設定
├── development環境設定
├── production環境設定
└── API設定

character_list.json   # キャラクター定義
├── キャラクターID・名前
├── モデルファイルパス
├── プレビュー画像パス
└── 説明文

animation_config.json # アニメーション設定
├── 速度閾値設定
├── 同期設定
└── アニメーション名マッピング

room_templates.json   # ルームテンプレート
├── デフォルトルーム設定
├── ルーム種別定義
└── 権限設定

ui_config.json        # UI設定
├── チャット設定
├── ルーム設定
└── デフォルト値
```

**役割**: ゲームの動作設定値
**変更頻度**: 開発時・設定変更時

### 🌍 data/localization/ - 多言語対応
```
ja.po                 # 日本語翻訳ファイル
en.po                 # 英語翻訳ファイル
```

**役割**: 多言語表示用の翻訳データ
**使用タイミング**: 言語切り替え時

### 💾 data/cache/ - キャッシュデータ
```
(実行時に生成)
├── chat_history.dat      # チャット履歴キャッシュ
├── user_data.cache       # ユーザーデータキャッシュ
├── downloaded_assets/    # ダウンロード済みアセット
└── temp_files/           # 一時ファイル
```

**役割**: 実行時の一時データ・キャッシュ
**管理**: 自動生成・削除、定期クリーンアップ

---

## 🔧 開発支援ディレクトリ

### 📦 addons/ - Godotアドオン
```
custom_networking/    # カスタムネットワーキングアドオン
ui_extensions/        # UI機能拡張アドオン
```

**役割**: Godotの機能拡張
**使用タイミング**: 特定機能が必要な場合

### 🛠️ tools/ - 開発ツール
```
build_scripts/        # ビルド自動化スクリプト
asset_pipeline/       # アセット処理・最適化ツール
debugging/            # デバッグ用ツール・スクリプト
```

**役割**: 開発効率化ツール
**使用者**: 開発者のみ

### 🧪 tests/ - テストファイル
```
unit/                 # ユニットテスト
integration/          # 統合テスト  
test_helpers/         # テスト支援ツール
```

**役割**: 品質保証・自動テスト
**実行タイミング**: 開発中・デプロイ前

### 📚 docs/ - ドキュメント
```
architecture.md       # アーキテクチャ文書
api_reference.md      # API仕様書
setup_guide.md        # セットアップガイド
contributing.md       # 開発貢献ガイド
```

**役割**: プロジェクト文書・仕様書
**対象者**: 開発者・運用者

---

## 🎯 ディレクトリ使用タイミングまとめ

| 使用頻度 | ディレクトリ群 | 説明 |
|----------|----------------|------|
| **常時** | `autoload/`, `scripts/core/` | ゲーム実行中常にメモリ上 |
| **頻繁** | `scenes/ui/`, `scripts/player/` | ユーザー操作で頻繁にアクセス |
| **定期** | `scripts/network/`, `scenes/worlds/` | 通信・マップ切り替え時 |
| **時々** | `assets/`, `data/config/` | リソース読み込み・設定変更時 |
| **稀** | `tools/`, `tests/`, `docs/` | 開発・保守作業時のみ |

この構造により、**機能別に整理された保守しやすい構成**が実現されます！