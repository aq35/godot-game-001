OK！ここは**エディタ操作が具体に見えない**と詰まりがち。
Godot 4 の UI 名称そのままで、**手を動かす順**に超具体でいきます。
（最後に「できたか確認チェックリスト」と「よくある罠」も付けます）

---

# 0) 前提のシーン構成（例）

```
MyCharacter (Node3D)   ← ここに SophiaSkin.gd or 見た目スクリプトが付く前提でもOK
├─ Skeleton3D
├─ MeshInstance3D
└─ AnimationPlayer      ← Idle/Walk/Run/Jump/Fall/Land などのクリップが入っている
```

---

# 1) AnimationTree ノードを追加して紐づけ

1. **MyCharacter** を選択 → 右クリック → **子ノードを追加** → **AnimationTree** を追加。
2. **インスペクタ**で以下を設定

   * **Active**: チェック（ON）
   * **Anim Player**: 既存の **AnimationPlayer** を指定
   * **Tree Root**: 右側の **\[▼]** から **New AnimationNodeStateMachine** を選択
     → `AnimationTree` の下に内部的に**ステートマシン**が作られる状態になります。
3. ここまでで `AnimationTree.active = true` & `AnimationPlayer` 連動が完成。

---

# 2) StateMachine にステートを並べる

1. **AnimationTree** を選択 → 下部の **AnimationTree パネル**（エディタ下の専用ビュー）に
   **「StateMachine」** のノードグラフが表示されます。
2. 右クリック → **Add Node** → **State** を追加（複数回）

   * 5つ作る：`Idle`, `Move`, `Jump`, `Fall`, `Land`
3. 各 **State** をダブルクリック → 右側のプロパティで
   **Animation** に **AnimationPlayer のクリップ名**を選ぶ

   * `Idle` → Idle クリップ
   * `Move` → いったん Walk など代表でOK（後で Blend に差し替え）
   * `Jump` → Jump（あれば jump\_start でもOK）
   * `Fall` → Fall
   * `Land` → Land（なければ省略可）

> ※ ここではまず「単純なステートで鳴る」状態を作ります。
> Move を BlendSpace にするのは次のステップ。

---

# 3) Move を BlendSpace1D にする

1. **Move** ステートを選択 → 右側の **Node** プロパティで
   **「Node Type」** を **AnimationNodeBlendSpace1D** に変更。
   （もしくは StateMachine グラフを右クリック → **Add Node → BlendSpace1D** を直接作ってもOK）
2. Move を選択した状態で、下に **BlendSpace1D エディタ**が出るので以下を設定：

   * **Blend**（横軸の名前）: 例 `speed`（任意）
   * **Min**: `0.0`（静止）
   * **Max**: `1.0`（全力）
3. BlendSpace1D の**空間内を右クリック → Add Animation** でアニメを配置：

   * `0.0` の位置に **Idle**（または Walk(遅い)）
   * `0.5` の位置に **Walk**
   * `1.0` の位置に **Run**
     配置後、ドラッグで位置微調整できます。

> これで \*\*Move ステートの中身が「速度に応じて歩き↔走りをブレンドするノード」\*\*になりました。
> コードからは `AnimationTree.set("parameters/StateMachine/Move/blend_position", 0..1)` で制御します。

---

# 4) 遷移矢印（Transition）をつなぐ

1. StateMachine グラフ上で、**ノードをドラッグ → 別ノードにドロップ**で矢印が作られます。
   例：

   * `Idle → Move` / `Move → Idle`
   * `Idle/Move → Jump`
   * `Jump → Fall`（ジャンプの上昇が終わって落下に入る流れを手動にするなら）
   * `Fall → Land`
   * `Land → Idle` と `Land → Move`（**Auto Advance** で自動戻りが楽）
2. 矢印をクリックすると、右側に **Transition** の設定が出ます：

   * **Advance Mode**

     * **Immediate**: すぐ切替（FPS っぽいキレ味）
     * **Crossfade**: クロスフェードで自然
   * **Xfade Time**: クロスフェード秒数（例: 0.1～0.2）
   * **Auto Advance**（Land のような短い着地モーションに便利）
     → **チェック**すると、そのステートの再生が終わると**自動で次の遷移先**に進む
     → `Land → Idle` と `Land → Move` の2本を用意しておくと、**次にいる/向かうべきノード**へ自動遷移できます（Godotは複数矢印の場合、**条件**がないと曖昧なので、通常はどちらか一方にします。両方作るならコード側で `land()` 後に `idle()` or `move()` を呼ぶ方式がシンプル）。

> まずは**最小**で OK：
> `Idle↔Move`、`Move→Jump→Fall→Land→Idle` の一本線があれば動き始められます。

---

# 5) コードから動かす（確認用）

**SophiaSkin.gd（見た目制御）**

```gdscript
extends Node3D

@onready var tree: AnimationTree = %AnimationTree
@onready var playback := tree.get("parameters/StateMachine/playback") as AnimationNodeStateMachinePlayback

const MOVE_BLEND := "parameters/StateMachine/Move/blend_position"

func _ready() -> void:
	tree.active = true
	playback.travel("Idle")

func idle() -> void:
	playback.travel("Idle")

func move(ratio: float) -> void:
	tree.set(MOVE_BLEND, clamp(ratio, 0.0, 1.0))
	if playback.get_current_node() != "Move":
		playback.travel("Move")

func jump() -> void:
	playback.travel("Jump")

func fall() -> void:
	playback.travel("Fall")

func land() -> void:
	playback.travel("Land") # Land ステート側を Auto Advance で Idle/Move へ戻すか、戻しはコードで。
```

\*\*Player.gd（物理・入力側）\*\*からは、速度に応じた 0..1 を渡すだけ：

```gdscript
var ground_speed := Vector2(velocity.x, velocity.z).length()
if is_on_floor():
	if ground_speed > 0.0:
		_skin.move(clamp(ground_speed / move_speed, 0.0, 1.0))
	else:
		_skin.idle()
```

---

# 完成確認チェックリスト

* [ ] AnimationTree の **Active** が ON
* [ ] AnimationTree の **Anim Player** が正しく指定されている
* [ ] **StateMachine** に `Idle/Move/Jump/Fall/Land` がある
* [ ] 各ステートに **Animation**（もしくは Move=BlendSpace1D の中に複数クリップ）を割当
* [ ] **矢印**が正しくつながっている（最低限 Idle↔Move と Move→Jump→Fall→Land→Idle）
* [ ] コードで `parameters/StateMachine/Move/blend_position` に 0..1 をセットすると、**歩き↔走りがブレンド**する
* [ ] `playback.travel("Jump")` を呼ぶとジャンプのアニメが再生され、**Fall/Land へ遷移**する

---

# よくある罠

* **パスのtypo**
  例：`parameters/StateMachine/Move/blend_position` の `StateMachine` / `Move` / `blend_position` のいずれかをミスる。
  → \*\*AnimationTreeパネル右上の「パスコピー」\*\*で正確に拾うのが安全。
* **Active 忘れ**
  `tree.active = true` を忘れると一切再生されない。
* **AnimationPlayer にクリップが無い**
  `.glb` にアクションが入っていないと空。Blender 側で NLA/Action を確認。
* **State の NodeType が「Animation」になってて BlendSpace が出ない**
  Move を **BlendSpace1D** に切り替えたか確認（State を BlendSpace ノードに置換）。

---

ここまでできると、もう「イメージ湧かない」ゾーンは抜けてます。
もし可能なら **AnimationTree パネルのスクショ or State 名前**を教えてください。
あなたの実データの**正しいパス文字列**（`parameters/...`）をこちらで書き起こして、**そのまま貼るだけ版**のコードにして返します。
